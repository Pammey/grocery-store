{% extends "base.html" %}
{% load static %}
{% load humanize %}

{% block title %}Organic Broccoli - FreshDirect{% endblock %}

{% block content %}
    <main class="py-5" style="padding-top: 100px;"> 
        <div class="container">
            <nav aria-label="breadcrumb" class="mb-4">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="{% url 'home' %}">Home</a></li>
                    <li class="breadcrumb-item"><a href="{% url 'shop' %}">Shop</a></li>
                    <li class="breadcrumb-item"><a href="{% url 'shop' %}?category=vegetables">Vegetables</a></li> {# Example: link to category #}
                    <li class="breadcrumb-item active" aria-current="page">Organic Broccoli</li>
                </ol>
            </nav>

            <div class="row g-5">
                <div class="col-lg-6 product-gallery">
                    <div class="main-image mb-3">
                        <img src="{{product.image.url}}" alt="Organic Broccoli - Main" class="img-fluid">
                    </div>
                    <div class="thumbnail-images d-flex gap-2">
                        <img src="https://images.unsplash.com/photo-1598170845058-32b9d6a5da37?q=80&w=2070&auto=format&fit=crop" alt="Broccoli Thumbnail 1" class="img-fluid w-25 active">
                        <img src="https://images.unsplash.com/photo-1584357382210-91b5a5a1f188?q=80&w=2070&auto=format&fit=crop" alt="Broccoli Thumbnail 2" class="img-fluid w-25">
                        <img src="https://images.unsplash.com/photo-1628773912690-50f75471a806?q=80&w=2070&auto=format&fit=crop" alt="Broccoli Thumbnail 3" class="img-fluid w-25">
                    </div>
                </div>

                <div class="col-lg-6 product-info">
                    <h1 class="display-5 fw-bold">{{ product.name }}</h1>
                    <div class="d-flex align-items-center mb-3">
                        <div class="rating-stars">
                            <i class="bi bi-star-fill"></i><i class="bi bi-star-fill"></i><i class="bi bi-star-fill"></i><i class="bi bi-star-fill"></i><i class="bi bi-star-half"></i>
                        </div>
                        <a href="#reviews-tab" class="ms-2 text-muted">(12 Reviews)</a>
                    </div>
                    
                    <p class="product-price-details mb-3">
                        ₦{{product.price | intcomma}}<span class="product-old-price-details">₦1,500.00</span>
                    </p>

                    <p class="lead text-muted">Crisp, fresh, and packed with nutrients. Our organic broccoli is sourced from trusted local farms, ensuring the highest quality and taste for your family's meals.</p>
                    
                    <div class="d-flex align-items-center mb-4">
                        <span class="badge bg-success-subtle text-success-emphasis rounded-pill me-3">In Stock</span>
                        <span class="text-muted small">per kg</span>
                    </div>

                    <div class="d-flex align-items-center mb-4">
                        <label for="quantity" class="form-label me-3 mb-0 fw-bold">Quantity:</label>
                        <div class="input-group quantity-selector" style="width: 140px;">
                            <button class="btn btn-outline-secondary" type="button" id="button-minus">-</button>
                            <input type="text" id="quantity" class="form-control" value="1" readonly>
                            <button class="btn btn-outline-secondary" type="button" id="button-plus">+</button>
                        </div>
                    </div>
                    
                    <div class="d-grid gap-2 d-md-flex">
                        <button class="btn btn-primary btn-lg flex-grow-1" type="button"><i class="bi bi-cart-plus-fill me-2"></i>Add to Cart</button>
                        <button class="btn btn-outline-danger btn-lg" type="button" title="Add to Wishlist"><i class="bi bi-heart-fill"></i></button>
                    </div>

                    <hr class="my-4">

                    <div class="product-meta">
                        <p><strong>SKU:</strong> <span>VEG-00124</span></p>
                        <p><strong>Category:</strong> <a href="#">Vegetables</a></p>
                    </div>
                </div>
            </div>

            <div class="mt-5">
                <ul class="nav nav-tabs" id="productDetailsTab" role="tablist">
                    <li class="nav-item" role="presentation">
                        <button class="nav-link active" id="description-tab" data-bs-toggle="tab" data-bs-target="#description-tab-pane" type="button" role="tab">Description</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="nutrition-tab" data-bs-toggle="tab" data-bs-target="#nutrition-tab-pane" type="button" role="tab">Nutritional Info</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="reviews-tab" data-bs-toggle="tab" data-bs-target="#reviews-tab-pane" type="button" role="tab">Reviews (12)</button>
                    </li>
                </ul>
                <div class="tab-content pt-4" id="productDetailsTabContent">
                    <div class="tab-pane fade show active" id="description-tab-pane" role="tabpanel">
                        <p>Our Organic Broccoli is grown with care by our partner farmers in Jos, Plateau State, known for its ideal climate. Harvested at peak freshness, this versatile vegetable is perfect for steaming, roasting, or adding to your favorite stir-fry. It's free from synthetic pesticides and fertilizers, making it a healthy and safe choice for you and your loved ones. Each head is hand-selected to meet our strict quality standards.</p>
                    </div>
                    <div class="tab-pane fade" id="nutrition-tab-pane" role="tabpanel">
                        <table class="table table-striped">
                            <thead><tr><th>Nutrient</th><th>Amount per 100g</th></tr></thead>
                            <tbody>
                                <tr><td>Calories</td><td>34 kcal</td></tr>
                                <tr><td>Protein</td><td>2.8 g</td></tr>
                                <tr><td>Carbohydrates</td><td>7 g</td></tr>
                                <tr><td>Fiber</td><td>2.6 g</td></tr>
                                <tr><td>Vitamin C</td><td>148% DV</td></tr>
                                <tr><td>Vitamin K</td><td>127% DV</td></tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="tab-pane fade" id="reviews-tab-pane" role="tabpanel">
                        <div class="mb-4">
                            <div class="review pb-3 mb-3">
                                <div class="d-flex justify-content-between">
                                    <span class="review-author">Aisha Bello</span>
                                    <span class="review-date">Sep 20, 2025</span>
                                </div>
                                <div class="rating-stars my-1"><i class="bi bi-star-fill"></i><i class="bi bi-star-fill"></i><i class="bi bi-star-fill"></i><i class="bi bi-star-fill"></i><i class="bi bi-star-fill"></i></div>
                                <p>Incredibly fresh! The best broccoli I've had in Lagos. Will definitely be ordering again.</p>
                            </div>
                            <div class="review pb-3 mb-3">
                                <div class="d-flex justify-content-between">
                                    <span class="review-author">David Okon</span>
                                    <span class="review-date">Sep 18, 2025</span>
                                </div>
                                <div class="rating-stars my-1"><i class="bi bi-star-fill"></i><i class="bi bi-star-fill"></i><i class="bi bi-star-fill"></i><i class="bi bi-star-fill"></i><i class="bi bi-star"></i></div>
                                <p>Very good quality, arrived crisp and green. Great for my weekly meal prep.</p>
                            </div>
                        </div>
                        <h4 class="mb-3">Leave a Review</h4>
                        <form>
                            <div class="mb-3">
                                <label for="reviewName" class="form-label">Your Name</label>
                                <input type="text" class="form-control" id="reviewName" required>
                            </div>
                             <div class="mb-3">
                                <label class="form-label">Your Rating</label>
                                <div class="rating-stars fs-4"><i class="bi bi-star"></i><i class="bi bi-star"></i><i class="bi bi-star"></i><i class="bi bi-star"></i><i class="bi bi-star"></i></div>
                            </div>
                            <div class="mb-3">
                                <label for="reviewText" class="form-label">Your Review</label>
                                <textarea class="form-control" id="reviewText" rows="3" required></textarea>
                            </div>
                            <button type="submit" class="btn btn-primary">Submit Review</button>
                        </form>
                    </div>
                </div>
            </div>

            <div class="mt-5 pt-5 border-top">
                <h2 class="text-center section-title mb-4">You Might Also Like</h2> {# Added mb-4 for spacing #}
                <div class="row g-4 mt-3">
                    <div class="col-md-6 col-lg-3">
                        <div class="card product-card h-100">
                            <img src="https://images.unsplash.com/photo-1550258987-190a2347bba7?q=80&w=1974&auto=format&fit=crop" class="card-img-top product-img" alt="Fresh Strawberries">
                            <div class="card-body text-center d-flex flex-column">
                                <h5 class="product-title">Fresh Strawberries</h5>
                                <p class="product-price mt-auto">₦2,500.00</p>
                                <a href="#" class="btn btn-sm btn-add-to-cart mt-2">Add to Cart</a>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6 col-lg-3 product-details-related"> {# Added class for specific image height #}
                         <div class="card product-card h-100">
                            <img src="https://images.unsplash.com/photo-1627485937980-22ae4555a6a3?q=80&w=1974&auto=format&fit=crop" class="card-img-top product-img" alt="Ripe Avocados">
                            <div class="card-body text-center d-flex flex-column">
                                <h5 class="product-title">Ripe Avocados</h5>
                                <p class="product-price mt-auto">₦700.00</p>
                                <a href="#" class="btn btn-sm btn-add-to-cart mt-2">Add to Cart</a>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6 col-lg-3 product-details-related"> {# Added class for specific image height #}
                        <div class="card product-card h-100">
                            <img src="https://images.unsplash.com/photo-1563503200-d47568f9a2b5?q=80&w=1974&auto=format&fit=crop" class="card-img-top product-img" alt="Organic Carrots">
                            <div class="card-body text-center d-flex flex-column">
                                <h5 class="product-title">Organic Carrots</h5>
                                <p class="product-price mt-auto">₦950.00</p>
                                <a href="#" class="btn btn-sm btn-add-to-cart mt-2">Add to Cart</a>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6 col-lg-3 product-details-related"> {# Added class for specific image height #}
                        <div class="card product-card h-100">
                            <img src="https://images.unsplash.com/photo-1550583724-b2692b85b210?q=80&w=1974&auto=format&fit=crop" class="card-img-top product-img" alt="Sourdough Bread">
                            <div class="card-body text-center d-flex flex-column">
                                <h5 class="product-title">Artisan Sourdough Bread</h5>
                                <p class="product-price mt-auto">₦2,000.00</p>
                                <a href="#" class="btn btn-sm btn-add-to-cart mt-2">Add to Cart</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
{% endblock %}

{% block extra_js %}
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const minusButton = document.getElementById('button-minus');
            const plusButton = document.getElementById('button-plus');
            const quantityInput = document.getElementById('quantity');

            minusButton.addEventListener('click', function() {
                let currentValue = parseInt(quantityInput.value, 10);
                if (currentValue > 1) {
                    quantityInput.value = currentValue - 1;
                }
            });

            plusButton.addEventListener('click', function() {
                let currentValue = parseInt(quantityInput.value, 10);
                quantityInput.value = currentValue + 1;
            });
        });
    </script>
{% endblock %}